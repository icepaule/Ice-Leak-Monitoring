{% extends "base.html" %}
{% block title %}Keywords - Ice-Leak-Monitor{% endblock %}

{% block content %}
<h1>Keywords</h1>

<!-- Add Keyword Form -->
<div class="card">
    <h2>Keyword hinzufuegen</h2>
    <form method="POST" action="/keywords" class="form-inline">
        <input type="text" name="term" placeholder="Suchbegriff eingeben..." required class="input">
        <select name="category" class="input select">
            {% for cat in categories %}
            <option value="{{ cat }}">{{ cat }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">Hinzufuegen</button>
    </form>
</div>

<!-- Keywords Table -->
<div class="card">
    <h2>Aktive Keywords ({{ keywords|length }})</h2>
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Begriff</th>
                <th>Kategorie</th>
                <th>Status</th>
                <th>Erstellt</th>
                <th>Aktionen</th>
            </tr>
        </thead>
        <tbody>
            {% for kw in keywords %}
            <tr id="kw-{{ kw.id }}" class="{% if not kw.is_active %}row-disabled{% endif %}">
                <td>{{ kw.id }}</td>
                <td><code>{{ kw.term }}</code></td>
                <td><span class="badge badge-category">{{ kw.category }}</span></td>
                <td>
                    <span class="badge {% if kw.is_active %}badge-completed{% else %}badge-failed{% endif %}">
                        {{ "Aktiv" if kw.is_active else "Inaktiv" }}
                    </span>
                </td>
                <td>{{ kw.created_at }}</td>
                <td class="actions">
                    <button class="btn btn-sm btn-secondary" onclick="toggleKeyword({{ kw.id }})">
                        {{ "Deaktivieren" if kw.is_active else "Aktivieren" }}
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="deleteKeyword({{ kw.id }})">
                        Loeschen
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
